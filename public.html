<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>[루시퍼홍] 7대 업무지구 대중교통 뽀개기</title>
    <style>
        #map {
            width: 100%;
            height: 400px;
            margin-bottom: 20px;
        }
        .result-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: flex-start;
        }
        .result {
            position: relative;
            width: 440px !important;
            height: 600px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }
        .controls-container {
            display: flex;
            gap: 10px;
            align-items: center;
            gap: 100px; /* 체크박스와 토글 버튼 사이의 간격 설정 */
            margin-bottom: 10px;
        }
        .checkbox-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .toggle-container {
            display: flex;
            gap: 5px;
            align-items: center;
        }
        .toggle-button {
            padding: 5px 10px;
            cursor: pointer;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f0f0f0;
        }
        .toggle-button.active {
            background-color: #007bff;
            color: #fff;
        }
        .notice {
            margin-left: auto;
            color: rgb(8, 8, 8);
            font-size: 14px;
        }
        .view-large-button {
            position: absolute;
            top: 0px;
            right: 10px;
            padding: 5px 10px;
            background-color: #ED7D31;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
		.result-frame {
			width: 100%; /* 부모 div에 맞게 전체 너비 사용 */
			height: 100%; /* 부모 div에 맞게 전체 높이 사용 */
		}

    </style>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=hcuap73kdc"></script>
</head>
<body>

<h1>[루시퍼홍] 7대 업무지구 교통 원클릭</h1>
<div class="controls-container">
    <div class="checkbox-container">
        <label><input type="checkbox" id="chk1" checked> 강남역</label>
        <label><input type="checkbox" id="chk2" checked> 서울시청역</label>
        <label><input type="checkbox" id="chk3" checked> 여의도역</label>
        <label><input type="checkbox" id="chk4"> 가산디지털단지역</label>
        <label><input type="checkbox" id="chk8"> 구로지디털단지역</label>
        <label><input type="checkbox" id="chk5"> 판교역</label>
        <label><input type="checkbox" id="chk6"> 마곡역</label>
        <label><input type="checkbox" id="chk7"> DMC역</label>
    </div>
    <div class="toggle-container">
        <span class="toggle-button active" id="transitBtn">대중교통</span>
        <span class="toggle-button" id="carBtn">자동차</span>
        <span class="notice">&nbsp;&nbsp;(일별, 월별 이용량을 초과하면 이용이 중단될 수 있습니다)</span>
    </div>
</div>

<div id="map"></div>
<div class="result-container">
    <div class="result">
        <iframe id="result1" class="result-frame" src="" frameborder="0"></iframe>
    </div>
    <div class="result">
        <iframe id="result2" class="result-frame" src="" frameborder="0"></iframe>
    </div>
    <div class="result">
        <iframe id="result3" class="result-frame" src="" frameborder="0"></iframe>
    </div>
    <div class="result">
        <iframe id="result4" class="result-frame" src="" frameborder="0"></iframe>
    </div>
    <div class="result">
        <iframe id="result5" class="result-frame" src="" frameborder="0"></iframe>
    </div>
    <div class="result">
        <iframe id="result6" class="result-frame" src="" frameborder="0"></iframe>
    </div>
    <div class="result">
        <iframe id="result7" class="result-frame" src="" frameborder="0"></iframe>
    </div>
    <div class="result">
        <iframe id="result8" class="result-frame" src="" frameborder="0"></iframe>
    </div>
</div>

<script>
    var map = new naver.maps.Map('map', {
        center: new naver.maps.LatLng(37.5665, 126.9780),
        zoom: 13
    });

    var marker = new naver.maps.Marker({
        position: map.getCenter(),
        map: map
    });

    let transportMode = 'transit';

    document.getElementById('transitBtn').addEventListener('click', function() {
        transportMode = 'transit';
        updateToggleButtons('transit');
    });

    document.getElementById('carBtn').addEventListener('click', function() {
        transportMode = 'car';
        updateToggleButtons('car');
    });

    function updateToggleButtons(mode) {
        document.getElementById('transitBtn').classList.toggle('active', mode === 'transit');
        document.getElementById('carBtn').classList.toggle('active', mode === 'car');
    }

    naver.maps.Event.addListener(map, 'click', function(e) {
        var latlng = e.latlng;
        marker.setPosition(latlng);

        var startX = latlng.lng();
        var startY = latlng.lat();

        var urls = [
            { id: 'chk1', url: `https://map.naver.com/p/directions/${startX},${startY},출발지/127.027636,37.497951,강남역2호선,222,SUBWAY_STATION/-/${transportMode}?c=12.00,0,0,0,dh` },
            { id: 'chk2', url: `https://map.naver.com/p/directions/${startX},${startY},출발지/126.977022,37.564719,서울시청역2호선,273,SUBWAY_STATION/-/${transportMode}?c=12.00,0,0,0,dh` },
            { id: 'chk3', url: `https://map.naver.com/p/directions/${startX},${startY},출발지/126.924374,37.521624,여의도역5호선,526,SUBWAY_STATION/-/${transportMode}?c=12.00,0,0,0,dh` },
            { id: 'chk4', url: `https://map.naver.com/p/directions/${startX},${startY},출발지/126.882734,37.481339,가산디지털단지역1호선,172,SUBWAY_STATION/-/${transportMode}?c=12.00,0,0,0,dh` },
            { id: 'chk8', url: `https://map.naver.com/p/directions/${startX},${startY},출발지/126.900198,37.485266,구로지디털단지역2호선,232,SUBWAY_STATION/-/${transportMode}?c=12.00,0,0,0,dh` },
            { id: 'chk5', url: `https://map.naver.com/p/directions/${startX},${startY},출발지/127.111699,37.394768,판교역신분당선,1914,SUBWAY_STATION/-/${transportMode}?c=12.00,0,0,0,dh` },
            { id: 'chk6', url: `https://map.naver.com/p/directions/${startX},${startY},출발지/126.825231,37.560143,마곡역5호선,514,SUBWAY_STATION/-/${transportMode}?c=12.00,0,0,0,dh` },
            { id: 'chk7', url: `https://map.naver.com/p/directions/${startX},${startY},출발지/126.898109,37.576528,DMC역6호선,618,SUBWAY_STATION/-/${transportMode}?c=12.00,0,0,0,dh` }
        ];

        let frameIndex = 1; // iframe index
        urls.forEach(destination => {
            const checkbox = document.getElementById(destination.id);
            if (checkbox.checked && frameIndex <= 8) { // Check if checkbox is checked and within iframe limit
                const iframe = document.getElementById(`result${frameIndex}`);
                iframe.src = destination.url;

                // 크게보기 버튼 동적으로 생성
                createLargeViewButton(`result${frameIndex}`);

                frameIndex++;
            }
        });

        // Clear remaining iframes that are not used and remove buttons
        for (let i = frameIndex; i <= 8; i++) {
            document.getElementById(`result${i}`).src = '';
            removeLargeViewButton(`result${i}`);
        }
    });

    // 새 탭으로 iframe의 src 열기
    function openInNewTab(resultId) {
        const iframe = document.getElementById(resultId);
        const url = iframe.src;
        if (url) {
            window.open(url, '_blank');
        } else {
            alert('경로가 설정되지 않았습니다.');
        }
    }

    // "크게보기" 버튼 생성
    function createLargeViewButton(resultId) {
        const iframeContainer = document.getElementById(resultId).parentElement;
        if (!iframeContainer.querySelector('.view-large-button')) {
            const button = document.createElement('button');
            button.classList.add('view-large-button');
            button.textContent = '크게보기';
            button.onclick = function() { openInNewTab(resultId); };
            iframeContainer.appendChild(button);
        }
    }

    // "크게보기" 버튼 제거
    function removeLargeViewButton(resultId) {
        const iframeContainer = document.getElementById(resultId).parentElement;
        const button = iframeContainer.querySelector('.view-large-button');
        if (button) {
            button.remove();
        }
    }
</script>

</body>
</html>
