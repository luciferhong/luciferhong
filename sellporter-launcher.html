<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Sellporter Launcher</title>
  <script>
    (function () {
      var params = new URLSearchParams(window.location.search);
      var target = params.get("u");

      if (!target) {
        document.addEventListener('DOMContentLoaded', function(){
          document.body.textContent = "대상 주소(u)가 없습니다.";
        });
        return;
      }

      // 1) 같은 이름의 탭 재사용 시도
      var win = null;
      try { win = window.open(target, "SELLPORTER_TAB"); } catch (e) { win = null; }

      // 2) 팝업이 차단되었거나 실패하면 같은 탭에서 바로 이동
      if (!win) {
        window.location.replace(target);
        return;
      }

      // 3) 새/기존 탭이 열렸다면 포커스 후 런처 탭 닫기(닫기 실패해도 무시)
      try { if (win.focus) win.focus(); } catch (e) {}
      setTimeout(function(){ window.close(); }, 0);
    })();
  </script>
</head>
<body>
  열리는 중입니다...
</body>
</html>
